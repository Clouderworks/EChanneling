
<div *ngIf="loading">Loading patients...</div>
<div *ngIf="error" class="alert alert-danger">{{ error }}</div>

<div *ngIf="!loading && !error">
  <h2>Patient Dashboard</h2>
  <div style="margin-bottom:1rem;">
  <a *ngIf="auth.isAdmin() || auth.isReceptionist()" routerLink="/register" style="background:#43a047; color:#fff; border:none; border-radius:4px; padding:0.5rem 1.5rem; text-decoration:none; display:inline-block;">Register New Patient</a>
  </div>
  <ul>
    <li *ngFor="let patient of patients">
      {{ patient.firstName }} {{ patient.lastName }} ({{ patient.nhiNumber }})
  <a *ngIf="auth.isAdmin() || auth.isDoctor()" [routerLink]="['/dashboard/edit']" [queryParams]="{ id: patient.id }" style="margin-left:1rem; background:#1565c0; color:#fff; border:none; border-radius:4px; padding:0.25rem 1rem; text-decoration:none; display:inline-block;">Edit</a>
      <button (click)="selectPatient(patient)" style="margin-left:0.5rem;">View</button>
    </li>
  </ul>

  <div *ngIf="selectedPatient">
    <h3>Patient Profile</h3>
    <pre>{{ selectedPatient | json }}</pre>
    <button (click)="clearSelection()">Close</button>
  </div>

  <div style="margin-top:2rem; color:#888; font-size:0.95em;">
    <span *ngIf="auth.isAdmin()">You are logged in as <b>Admin</b>. All actions enabled.</span>
    <span *ngIf="auth.isDoctor() && !auth.isAdmin()">You are logged in as <b>Doctor</b>. You can view and edit patients.</span>
    <span *ngIf="auth.isReceptionist() && !auth.isAdmin() && !auth.isDoctor()">You are logged in as <b>Receptionist</b>. You can register new patients.</span>
  </div>
</div>
